# Dealing with Intermittent Issues

Hiç ara sıra meydana gelen bir sorunu çözmeye çalıştınız mı? Belki rastgele çöken programlarla, bazen askıya alınamayan dizüstü bilgisayarlarla, beklenmedik şekilde yanıt vermeyi durduran web hizmetleriyle veya bozulan dosya içerikleriyle uğraşmışsınızdır. Ancak yalnızca bazı durumlarda gelip giden hataların yeniden üretimi zordur ve hata ayıklamak son derece can sıkıcıdır. BT'de çalışıyorsanız, muhtemelen aralıklı sorunlarla uğraşırken kendi dozunuzdaki hayal kırıklığını da yaşamışsınızdır. Peki böyle bir sorunda hata ayıklamaya çalışıyorsanız ne yapabilirsiniz? İlk adım, olup bitenlere daha fazla dahil olmaktır, böylece sorunun ne zaman gerçekleşip ne zaman gerçekleşmediğini anlarsınız. Bir hatayla ve bakımını yaptığınız bir kod parçasıyla ilgileniyorsanız, genellikle sorunla ilgili daha fazla bilgi kaydedecek şekilde programı değiştirebilirsiniz. Hatanın ne zaman tetikleneceğini tam olarak bilmediğiniz için, günlüğe kaydettiğiniz bilgileri eksiksiz bir şekilde kullanmanız gerekir. Örneğin yakın zamanda IAM hizmetiyle ilgili bir sorun yaşadım. Ara sıra çöküyordu ve nedenini bulmaya çalışırken kayboluyordum. Hata mesajına baktığımda bunun özel karakterler kullanan dizelerle bir ilgisi olduğunu biliyordum ama hatanın tam olarak nerede olduğu hakkında hiçbir fikrim yoktu. Bu yüzden hizmete, girdiler ve dahil olabileceğinden şüphelendiğim işlev çağrıları etrafında daha fazla günlük kaydı bilgisi ekledim. Programın bir sonraki çökmesinde, kodun, kodlama için doğru kullanımın eksik olduğu kısmını tespit edebildim ve sorunu düzelttim. Daha fazla bilgi almak için programın kodunu değiştiremiyorsanız değiştirebileceğiniz bir günlük kaydı yapılandırması olup olmadığını kontrol edin. Pek çok uygulama ve hizmet, varsayılan moddan çok daha fazla çıktı üreten bir hata ayıklama modunu zaten içerir. Hata ayıklama bilgilerini önceden etkinleştirerek, sorunun bir dahaki sefere ortaya çıkması durumunda neler olduğuna dair daha iyi bir resim elde edebilirsiniz. Bu mümkün değilse sorun tetiklendiğinde ortamı izlemeye başvurmanız gerekir. Sorunun ne olduğuna bağlı olarak bilgisayardaki yük, aynı anda çalışan işlemler, ağ kullanımı vb. gibi farklı bilgi kaynaklarına bakmak isteyebilirsiniz. Rastgele zamanlarda ortaya çıkan hatalar için, hata oluştuğunda bize mümkün olduğunca fazla bilgi verecek şekilde sistemimizi onarmamız gerekir. Sorunu anlamak için yeterli bilgi elde edene kadar bunun birkaç kez tekrarlanması gerekebilir, ancak umudunuzu kaybetmeyin. Çoğu zaman sonunda gerçekte neler olup bittiğini anlayabileceğiniz bir noktaya gelebilirsiniz. Bazen ekstra günlük bilgisi eklediğimizde veya bir hata ayıklayıcı kullanarak kodu adım adım takip ettiğimizde hata ortadan kalkar. Bu, Werner Heisenberg'in onuruna Heisenbug lakaplı, özellikle can sıkıcı bir aralıklı sorun türüdür. Bir fenomeni sadece gözlemlemenin bile fenomeni değiştirdiği gözlemci etkisini ilk kez tanımlayan bilim adamıdır. Heisenbug'ları anlamak çok zordur çünkü onlara karıştığımızda böcek ortadan kalkar. Bu hatalar genellikle kötü kaynak yönetimine işaret eder. Belki bellek yanlış tahsis edilmiştir, ağ bağlantıları doğru şekilde başlatılmamıştır veya açık dosyalar düzgün şekilde işlenmemiştir. Bu durumlarda, genellikle ne olduğunu anlayana kadar etkilenen koda bakarak zaman harcamamız gerekir. Bir başka aralıklı sorun türü de, bir şeyi kapatıp tekrar açtığımızda ortadan kaybolan sorundur. BT'de sorunları çözmek için yaptığımız şeylerin çoğunun, işleri kapatıp tekrar açmaktan ibaret olduğuna dair pek çok şaka var. Tamam, çoğu durumda, bir cihazı kapatıp açmanın veya bir programı yeniden başlatmanın, düzeltmeye çalıştığımız sorunlardan herhangi birini ortadan kaldırdığı doğrudur. Ama neden bu? Bir bilgisayarı yeniden başlattığımızda veya bir programı yeniden başlattığımızda birçok şey değişir. Temiz bir sayfaya geri dönmek, tahsis edilen tüm belleğin serbest bırakılması, geçici dosyaların silinmesi, programların çalışma durumunun sıfırlanması, ağ bağlantılarının yeniden kurulması, açık dosyaların kapatılması ve daha fazlası anlamına gelir. Bir sorun, cihazı kapatıp tekrar açarak ortadan kalkıyorsa, yazılımda neredeyse kesinlikle bir hata vardır ve hata muhtemelen kaynakların doğru yönetilmemesiyle ilgilidir. Dolayısıyla, yeniden başlatmanın ardından bir sorun ortadan kalkarsa, bunun nedenini anlamaya çalışmak ve sorunu kapatıp tekrar açmayı gerektirmeyecek şekilde düzeltmenin mümkün olup olmadığına bakmak iyi bir fikirdir. Sonunda gerçek nedeni bulamazsak, yeniden başlatmayı sorunlu olmayan bir zamana planlamak da bir seçenek olabilir. Bu nedenle, nedenleri izole etmek, hata mesajlarını anlamak, günlük bilgilerini eklemek ve olası arızalar için yeni fikirler üretmek gibi bir sorunun temel nedenine ulaşmanın birkaç yoluna baktık. Ayrıca kendi kendine ortadan kaybolan ve sonra yeniden ortaya çıkan sorunlardan da bahsettik ve bunları nasıl çözeceğimize baktık. Birazdan, bir sorunu anlamaya ve onun temel nedenini nasıl bulacağımıza dair pratik bir örneğe göz atacağız.

Have you ever tried to solve a problem that happened only occasionally? Maybe you've dealt with programs that randomly crash, laptops that sometimes fail to suspend, web services that unexpectedly stop replying, or file contents that get corrupted. But only in some cases, bugs that come and go are hard to reproduce, and are extremely annoying to debug. If you work in IT, you've probably had your own dose of frustration while dealing with intermittent and issues. So what can you do if you're trying to debug an issue like that? The first step is to get more involved in what's going on, so that you understand when the issue happens and when it doesn't. If you're dealing with a bug and a piece of code that you maintain, you can usually modify the program to log more information related to the problem. Since you don't know exactly when the bug will trigger, you need to be thorough with the information that you log. For example, I recently had an issue with the service IAM. It was crashing sporadically, and I was at a loss trying to find out why. Looking at the error message, I knew it had something to do with strings that use special characters, but I had no idea where the bug was exactly. So I added more logging information to the service, around the inputs and the function calls that I suspect could be involved. The next time the program crashed, I was able to identify the part of the code where I was missing the proper handling for the encoding, and fixed the problem. If you can't modify the code of the program to get more information, check if there's a logging configuration that you can change. Many applications and services already include a debugging mode that generates a lot more output then the default mode. By enabling the debug information in advance, you can get a better picture of what's going on the next time the problem happens. If that's not possible, you'll need to resort to monitoring the environment when the issue triggers. Depending on what the problem is, you might want to look at different sources of information, like the load on the computer, the processes running at the same time, the usage of the network, and so on. For bugs that occur at random times, we need to repair our system to give us as much information as possible when the bug happens. This might require several iterations until we get enough information to understand the issue, but don't lose hope. Most of the time, you can finally get to the point where you can actually understand what's going on. Sometimes, the bug goes away when we add extra logging information, or when we follow the code step by step using a debugger. This is an especially annoying type of intermittent issue, nicknamed Heisenbug, in honor of Werner Heisenberg. He's the scientist that first described the observer effect, where just observing a phenomenon alters the phenomenon. Heisenbugs are extra hard to understand, because when we meddle with them, the bug goes away. These bugs usually point to bad resource management. Maybe the memory was wrongly allocated, the network connections weren't correctly initialized, or the open files weren't properly handled. In these cases, we usually need to just spend time looking at the effected code until we finally figure out what's up. Yet another type of intermittent issue is the one that goes away when we turn something off and on again. There's plenty of jokes related to how, in IT, a lot of what we do to solve problems, is just turn things off and on again. Okay, it's true that in many cases, power cycling a device or restarting a program gets rid of whichever problem we were trying to fix. But why is that? When we reboot a computer or restart a program, a bunch of things change. Going back to a clean slate means releasing all allocated memory, deleting temporary files, resetting the running state of programs, re-establishing network connections, closing open files and more. If a problem goes away by turning it off and on again, there's almost certainly a bug in the software, and the bug probably has to do with not managing resources correctly. So if an issue goes away after a restart, it's a good idea to try to figure out why that is, and see if it's possible to fix it in a way that doesn't require turning it off and on again. If in the end, we can't find the actual reason, scheduling a restart at a time that's not problematic can also be an option. So we've looked at a few ways of getting to the root cause of a problem, like isolating causes, understanding error messages, adding logging information, and generating new ideas for possible failures. We've also talked about problems that go away on their own and then pop up again, and looked at how to figure those out. Coming up, we'll check out a practical example of understanding a problem, and how to find its root cause.